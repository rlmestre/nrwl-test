<ng-container *ngrxLet="vm$; let vm">
    <ng-container *ngIf="!vm.loading; else loading">
        <input type="text" placeholder="Search" [formControl]="searchControl" />
        <ul>
            <li *ngFor="let t of vm.tickets">
                Ticket: {{t.id}}, {{t.description}}
                <a [routerLink]="['/ticket', t.id]">View</a>
            </li>
        </ul>

        <button (click)="showNewTicketForm(true)">New</button>

        <form *ngIf="vm.showForm" [formGroup]="form">
            <input type="text" formControlName="description" placeholder="Description" />
            <button (click)="createNewTicket(form)">Add</button>
            <button (click)="showNewTicketForm(false)">Cancel</button>
        </form>
    </ng-container>
</ng-container>

<ng-template #loading>
    <img src="assets/loading.svg" />
</ng-template>
